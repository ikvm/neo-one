// tslint:disable no-submodule-imports no-implicit-dependencies
// @ts-ignore
import files from '!../loaders/packagesLoaderEntry!../../../neo-one-smart-contract';
// @ts-ignore
import jest_d_ts from '!raw-loader!../../../../node_modules/@types/jest/index.d.ts';
// @ts-ignore
import node_d_ts from '!raw-loader!../../../../node_modules/@types/node/index.d.ts';
// @ts-ignore
import react_d_ts from '!raw-loader!../../../../node_modules/@types/react/index.d.ts';
// @ts-ignore
import bignumber_d_ts from '!raw-loader!../../../../node_modules/bignumber.js/bignumber.d.ts';
// @ts-ignore
import lib_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.d.ts';
// @ts-ignore
import lib_dom_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.dom.d.ts';
// @ts-ignore
import lib_dom_iterable_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.dom.iterable.d.ts';
// @ts-ignore
import lib_es2015_collection_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.collection.d.ts';
// @ts-ignore
import lib_es2015_core_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.core.d.ts';
// @ts-ignore
import lib_es2015_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.d.ts';
// @ts-ignore
import lib_es2015_generator_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.generator.d.ts';
// @ts-ignore
import lib_es2015_iterable_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.iterable.d.ts';
// @ts-ignore
import lib_es2015_promise_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.promise.d.ts';
// @ts-ignore
import lib_es2015_proxy_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.proxy.d.ts';
// @ts-ignore
import lib_es2015_reflect_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.reflect.d.ts';
// @ts-ignore
import lib_es2015_symbol_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.symbol.d.ts';
// @ts-ignore
import lib_es2015_symbol_wellknown_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts';
// @ts-ignore
import lib_es2016_array_include_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2016.array.include.d.ts';
// @ts-ignore
import lib_es2016_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2016.d.ts';
// @ts-ignore
import lib_es2016_full_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2016.full.d.ts';
// @ts-ignore
import lib_es2017_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.d.ts';
// @ts-ignore
import lib_es2017_full_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.full.d.ts';
// @ts-ignore
import lib_es2017_intl_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.intl.d.ts';
// @ts-ignore
import lib_es2017_object_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.object.d.ts';
// @ts-ignore
import lib_es2017_sharedmemory_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.sharedmemory.d.ts';
// @ts-ignore
import lib_es2017_string_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.string.d.ts';
// @ts-ignore
import lib_es2017_typedarrays_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2017.typedarrays.d.ts';
// @ts-ignore
import lib_es2018_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2018.d.ts';
// @ts-ignore
import lib_es2018_full_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2018.full.d.ts';
// @ts-ignore
import lib_es2018_intl_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2018.intl.d.ts';
// @ts-ignore
import lib_es2018_promise_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2018.promise.d.ts';
// @ts-ignore
import lib_es2018_regexp_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es2018.regexp.d.ts';
// @ts-ignore
import lib_es5_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es5.d.ts';
// @ts-ignore
import lib_es6_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.es6.d.ts';
// @ts-ignore
import lib_esnext_array_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.esnext.array.d.ts';
// @ts-ignore
import lib_esnext_asynciterable_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.esnext.asynciterable.d.ts';
// @ts-ignore
import lib_esnext_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.esnext.d.ts';
// @ts-ignore
import lib_esnext_full_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.esnext.full.d.ts';
// @ts-ignore
import lib_esnext_intl_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.esnext.intl.d.ts';
// @ts-ignore
import lib_esnext_symbol_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.esnext.symbol.d.ts';
// @ts-ignore
import lib_scripthost_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.scripthost.d.ts';
// @ts-ignore
import lib_webworker_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.webworker.d.ts';
// @ts-ignore
import lib_webworker_importscripts_d_ts from '!raw-loader!../../../../node_modules/typescript/lib/lib.webworker.importscripts.d.ts';
import { ensureDir, FileSystem, pathExists } from '@neo-one/local-browser';
import * as nodePath from 'path';
// @ts-ignore
import jestPackageJSONContents from '../../../../node_modules/@types/jest/package.json';
// @ts-ignore
import nodePackageJSONContents from '../../../../node_modules/@types/node/package.json';
// @ts-ignore
import reactPackageJSONContents from '../../../../node_modules/@types/react/package.json';
// @ts-ignore
import bignumberPackageJSONContents from '../../../../node_modules/bignumber.js/package.json';

const writeFile = (fs: FileSystem, path: string, contents: string) => {
  const exists = pathExists(fs, path);
  if (!exists) {
    fs.writeFileSync(path, contents);
  }
};

export const INTERNAL_DIR = '/.neo-one';
export const ENGINE_STATE_FILE = '/.neo-one/engine';
export const TRANSPILE_PATH = '/.neo-one/transpile';
export const EMPTY_MODULE_PATH = '/.neo-one/empty';

export const initializeFileSystem = (fs: FileSystem): void => {
  ensureDir(fs, '/node_modules/typescript/lib');
  ensureDir(fs, '/node_modules/@neo-one/smart-contract-lib/src');
  ensureDir(fs, '/node_modules/@neo-one/smart-contract/src');
  ensureDir(fs, '/node_modules/@types/jest');
  ensureDir(fs, '/node_modules/@types/node');
  ensureDir(fs, '/node_modules/@types/react');
  ensureDir(fs, '/node_modules/bignumber.js');
  ensureDir(fs, TRANSPILE_PATH);
  ensureDir(fs, nodePath.dirname(ENGINE_STATE_FILE));

  writeFile(fs, '/node_modules/typescript/lib/lib.d.ts', lib_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.dom.d.ts', lib_dom_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.dom.iterable.d.ts', lib_dom_iterable_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.collection.d.ts', lib_es2015_collection_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.core.d.ts', lib_es2015_core_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.d.ts', lib_es2015_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.generator.d.ts', lib_es2015_generator_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.iterable.d.ts', lib_es2015_iterable_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.promise.d.ts', lib_es2015_promise_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.proxy.d.ts', lib_es2015_proxy_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.reflect.d.ts', lib_es2015_reflect_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.symbol.d.ts', lib_es2015_symbol_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts', lib_es2015_symbol_wellknown_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2016.array.include.d.ts', lib_es2016_array_include_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2016.d.ts', lib_es2016_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2016.full.d.ts', lib_es2016_full_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.d.ts', lib_es2017_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.full.d.ts', lib_es2017_full_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.intl.d.ts', lib_es2017_intl_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.object.d.ts', lib_es2017_object_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.sharedmemory.d.ts', lib_es2017_sharedmemory_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.string.d.ts', lib_es2017_string_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2017.typedarrays.d.ts', lib_es2017_typedarrays_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2018.d.ts', lib_es2018_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2018.full.d.ts', lib_es2018_full_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2018.intl.d.ts', lib_es2018_intl_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2018.promise.d.ts', lib_es2018_promise_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es2018.regexp.d.ts', lib_es2018_regexp_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es5.d.ts', lib_es5_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.es6.d.ts', lib_es6_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.esnext.array.d.ts', lib_esnext_array_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.esnext.asynciterable.d.ts', lib_esnext_asynciterable_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.esnext.d.ts', lib_esnext_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.esnext.full.d.ts', lib_esnext_full_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.esnext.intl.d.ts', lib_esnext_intl_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.esnext.symbol.d.ts', lib_esnext_symbol_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.scripthost.d.ts', lib_scripthost_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.webworker.d.ts', lib_webworker_d_ts);
  writeFile(fs, '/node_modules/typescript/lib/lib.webworker.importscripts.d.ts', lib_webworker_importscripts_d_ts);
  writeFile(fs, '/node_modules/@types/jest/index.d.ts', jest_d_ts);
  writeFile(fs, '/node_modules/@types/jest/package.json', JSON.stringify(jestPackageJSONContents));
  writeFile(fs, '/node_modules/@types/node/index.d.ts', node_d_ts);
  writeFile(fs, '/node_modules/@types/node/package.json', JSON.stringify(nodePackageJSONContents));
  writeFile(fs, '/node_modules/@types/react/index.d.ts', react_d_ts);
  writeFile(fs, '/node_modules/@types/react/package.json', JSON.stringify(reactPackageJSONContents));
  writeFile(fs, '/node_modules/bignumber.js/bignumber.d.ts', bignumber_d_ts);
  writeFile(fs, '/node_modules/bignumber.js/package.json', JSON.stringify(bignumberPackageJSONContents));
  // tslint:disable-next-line no-any
  Object.entries(files).forEach(([path, contents]: any) => {
    ensureDir(fs, nodePath.dirname(path));
    writeFile(fs, path, contents);
  });
  writeFile(fs, EMPTY_MODULE_PATH, 'module.exports = undefined');
};
